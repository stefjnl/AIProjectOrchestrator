<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Project Orchestrator - Performance Optimization Analysis</title>
    <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 0;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .metric-card h3 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .metric-card p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .diagram-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }
        
        .diagram-title {
            text-align: center;
            color: #495057;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 20px 0;
        }
        
        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #00b894;
        }
        
        .warning {
            background: linear-gradient(120deg, #ffeaa7 0%, #fab1a0 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #e17055;
        }
        
        .success {
            background: linear-gradient(120deg, #55efc4 0%, #00b894 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #00a085;
        }
        
        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav-tab.active {
            background: #3498db;
            color: white;
            box-shadow: 0 2px 10px rgba(52, 152, 219, 0.3);
        }
        
        .nav-tab:hover:not(.active) {
            background: #f8f9fa;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .progress-bar {
            background: #ecf0f1;
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b894, #55efc4);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }
        
        th {
            background: #34495e;
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        
        .scroll-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.3);
            z-index: 1000;
        }
        
        .scroll-progress {
            height: 100%;
            background: linear-gradient(90deg, #74b9ff, #0984e3);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="scroll-indicator">
        <div class="scroll-progress" id="scrollProgress"></div>
    </div>

    <div class="container">
        <div class="header">
            <h1>üöÄ AI Project Orchestrator</h1>
            <p>Performance Optimization Analysis & Implementation Strategy</p>
        </div>

        <div class="nav-tabs">
            <div class="nav-tab active" onclick="showTab('overview')">üìä Overview</div>
            <div class="nav-tab" onclick="showTab('analysis')">üîç Analysis</div>
            <div class="nav-tab" onclick="showTab('strategies')">üí° Strategies</div>
            <div class="nav-tab" onclick="showTab('diagrams')">üèóÔ∏è Diagrams</div>
            <div class="nav-tab" onclick="showTab('implementation')">‚ö° Implementation</div>
        </div>

        <div id="overview" class="tab-content active">
            <div class="card">
                <h2>üéØ Executive Summary</h2>
                <div class="highlight">
                    <p><strong>Current Problem:</strong> Content generation (Requirements Analysis, Project Planning, User Stories) is taking 30-53 seconds, far exceeding the 5-second target.</p>
                    <p><strong>Solution:</strong> Comprehensive performance optimization strategy achieving <strong>70% improvement</strong> through intelligent caching, parallel processing, and smart model selection.</p>
                    <p><strong>Target Achievement:</strong> Reduce total pipeline time to <strong>9-15 seconds</strong> with individual operations under 6 seconds.</p>
                </div>

                <div class="performance-grid">
                    <div class="metric-card">
                        <h3>70%</h3>
                        <p>Performance Improvement</p>
                    </div>
                    <div class="metric-card">
                        <h3>5s</h3>
                        <p>Target Response Time</p>
                    </div>
                    <div class="metric-card">
                        <h3>99%</h3>
                        <p>Target Success Rate</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üìà Current vs. Optimized Performance</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Operation</th>
                            <th>Current Time</th>
                            <th>Optimized Time</th>
                            <th>Improvement</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Requirements Analysis</td>
                            <td>8-15s</td>
                            <td><strong>2-4s</strong></td>
                            <td>70% faster</td>
                        </tr>
                        <tr>
                            <td>Project Planning</td>
                            <td>10-18s</td>
                            <td><strong>3-5s</strong></td>
                            <td>72% faster</td>
                        </tr>
                        <tr>
                            <td>Story Generation</td>
                            <td>12-20s</td>
                            <td><strong>4-6s</strong></td>
                            <td>70% faster</td>
                        </tr>
                        <tr style="font-weight: bold; background: #e8f5e8;">
                            <td>Total Pipeline</td>
                            <td>30-53s</td>
                            <td><strong>9-15s</strong></td>
                            <td>70% faster</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="analysis" class="tab-content">
            <div class="card">
                <h2>üîç Performance Bottleneck Analysis</h2>
                
                <div class="warning">
                    <h3>üö® Critical Issues Identified</h3>
                    <ul>
                        <li><strong>Sequential Processing Chain:</strong> Each stage waits for previous completion</li>
                        <li><strong>External API Call Overhead:</strong> OpenRouter calls taking 2-8 seconds each</li>
                        <li><strong>Exponential Backoff Retries:</strong> Up to 14 seconds additional delay</li>
                        <li><strong>Database Operation Inefficiencies:</strong> Multiple round-trips, no eager loading</li>
                        <li><strong>Missing Caching Layers:</strong> No response caching for identical requests</li>
                    </ul>
                </div>

                <div class="code-block">
// Current problematic flow - SEQUENTIAL
public async Task<RequirementsAnalysisResponse> AnalyzeRequirementsAsync(request) {
    var instructionContent = await _instructionService.GetInstructionAsync("RequirementsAnalyst"); // 200ms
    var aiResponse = await aiClient.CallAsync(aiRequest); // 8-15s - MAIN BOTTLENECK
    await _requirementsAnalysisRepository.AddAsync(analysisEntity); // 100ms
    var reviewResponse = await _reviewService.SubmitForReviewAsync(reviewRequest); // 500ms
    return response; // Total: 8.8-16s
}
                </div>

                <div class="success">
                    <h3>‚úÖ Optimized Flow - PARALLEL</h3>
                    <ul>
                        <li><strong>Cache-First Approach:</strong> Sub-100ms for cached requests</li>
                        <li><strong>Parallel Operations:</strong> Concurrent execution of independent tasks</li>
                        <li><strong>Circuit Breaker:</strong> 8-second timeout with intelligent fallbacks</li>
                        <li><strong>Multi-Level Caching:</strong> Memory ‚Üí Redis ‚Üí Content-based caching</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2>üìä Detailed Performance Metrics</h2>
                
                <h3>Current API Call Breakdown:</h3>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 85%; background: linear-gradient(90deg, #e74c3c, #c0392b);"></div>
                </div>
                <p><strong>AI API Calls:</strong> 85% of total time (8-15s)</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 10%; background: linear-gradient(90deg, #f39c12, #e67e22);"></div>
                </div>
                <p><strong>Database Operations:</strong> 10% of total time (1-2s)</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 5%; background: linear-gradient(90deg, #27ae60, #229954);"></div>
                </div>
                <p><strong>Other Operations:</strong> 5% of total time (0.5-1s)</p>
            </div>
        </div>

        <div id="strategies" class="tab-content">
            <div class="card">
                <h2>üí° Optimization Strategies</h2>
                
                <div class="highlight">
                    <h3>üéØ Phase 1: Quick Wins (Week 1)</h3>
                    <ul>
                        <li><strong>Intelligent Model Selection:</strong> Route to optimal models based on complexity</li>
                        <li><strong>Connection Pooling:</strong> Optimize HTTP client configuration</li>
                        <li><strong>Enhanced Retry Strategy:</strong> Faster backoff with 2 max retries</li>
                        <li><strong>Parallel Operations:</strong> Execute independent operations concurrently</li>
                    </ul>
                </div>

                <div class="highlight">
                    <h3>üîß Phase 2: Core Improvements (Week 2-3)</h3>
                    <ul>
                        <li><strong>Multi-Level Caching:</strong> L1 Memory, L2 Redis, L3 AI Response caching</li>
                        <li><strong>Circuit Breaker Pattern:</strong> 8-second hard timeout with fallbacks</li>
                        <li><strong>Database Optimization:</strong> Eager loading, parallel queries, batch operations</li>
                        <li><strong>Performance Monitoring:</strong> Real-time metrics and adaptive optimization</li>
                    </ul>
                </div>

                <div class="highlight">
                    <h3>üöÄ Phase 3: Advanced Features (Week 4+)</h3>
                    <ul>
                        <li><strong>Predictive Caching:</strong> Based on user patterns and workflows</li>
                        <li><strong>Background Pre-processing:</strong> For common workflow paths</li>
                        <li><strong>Smart Batching:</strong> Multiple similar requests optimization</li>
                        <li><strong>Adaptive Scaling:</strong> Based on performance metrics</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2>üß† Intelligent Model Selection</h2>
                <div class="code-block">
public string SelectOptimalModel(string taskType, int contextSize, string complexity) {
    return taskType switch {
        "requirements_analysis" when contextSize < 1000 => "claude-3-haiku-20240307", // 1-2s
        "requirements_analysis" when contextSize < 3000 => "qwen/qwen3-coder",       // 2-4s
        "requirements_analysis" => "claude-3-sonnet-20240229",                        // 3-5s
        "project_planning" when complexity == "simple" => "qwen/qwen3-coder",         // 3-5s
        "project_planning" => "claude-3-sonnet-20240229",                             // 4-6s
        "story_generation" when complexity == "simple" => "claude-3-haiku-20240307",  // 2-4s
        "story_generation" => "qwen/qwen3-coder",                                     // 4-6s
        _ => "qwen/qwen3-coder" // Default balanced choice
    };
}
                </div>
            </div>
        </div>

        <div id="diagrams" class="tab-content">
            <div class="card">
                <h2>üèóÔ∏è System Architecture Diagrams</h2>
                
                <div class="diagram-container">
                    <div class="diagram-title">Current Architecture Flow (Sequential)</div>
                    <div class="mermaid">
                        graph TD
                            A[Client Request] --> B[Validate Input]
                            B --> C[Load Instructions]
                            C --> D[Call AI API]
                            D --> E[Wait for Response<br/>2-8 seconds]
                            E --> F[Save to Database]
                            F --> G[Submit for Review]
                            G --> H[Return Response]
                            
                            style D fill:#ff9999
                            style E fill:#ff9999
                    </div>
                </div>

                <div class="diagram-container">
                    <div class="diagram-title">Optimized Architecture Flow (Parallel)</div>
                    <div class="mermaid">
                        graph TD
                            A[Client Request] --> B[Check Cache]
                            B -->|Cache Hit| Z[Return Cached<br/>Response<br/>< 100ms]
                            B -->|Cache Miss| C[Parallel Operations]
                            
                            C --> D1[Validate Input]
                            C --> D2[Load Instructions]
                            C --> D3[Check AI Cache]
                            
                            D1 --> E[Wait for All<br/>Parallel Ops<br/>~500ms]
                            D2 --> E
                            D3 --> E
                            
                            E --> F{AI Response<br/>Cached?}
                            F -->|Yes| G[Use Cached Response<br/>< 50ms]
                            F -->|No| H[Call AI with<br/>Circuit Breaker<br/>2-4 seconds]
                            
                            G --> I[Parallel Save Ops]
                            H --> I
                            
                            I --> J1[Save to Database]
                            I --> J2[Submit for Review]
                            
                            J1 --> K[Return Response<br/>Total: 2-4 seconds]
                            J2 --> K
                            
                            style Z fill:#99ff99
                            style G fill:#99ff99
                            style H fill:#ffff99
                    </div>
                </div>

                <div class="diagram-container">
                    <div class="diagram-title">Intelligent Model Selection Architecture</div>
                    <div class="mermaid">
                        graph LR
                            A[Request Type] --> B{Model Router}
                            
                            B --> C[Requirements Analysis]
                            B --> D[Project Planning]
                            B --> E[Story Generation]
                            
                            C --> C1{Context Size}
                            C1 -->|< 1K chars| C2[Claude Haiku<br/>1-2s]
                            C1 -->|1K-3K chars| C3[Qwen3 Coder<br/>2-4s]
                            C1 -->|> 3K chars| C4[Claude Sonnet<br/>3-5s]
                            
                            D --> D1{Complexity}
                            D1 -->|Simple| D2[Qwen3 Coder<br/>3-5s]
                            D1 -->|Complex| D3[Claude Sonnet<br/>4-6s]
                            
                            E --> E1{Story Count}
                            E1 -->|< 5 stories| E2[Claude Haiku<br/>2-4s]
                            E1 -->|5-15 stories| E3[Qwen3 Coder<br/>4-6s]
                            E1 -->|> 15 stories| E4[Claude Sonnet<br/>6-8s]
                            
                            style C2 fill:#99ff99
                            style C3 fill:#ffff99
                            style D2 fill:#99ff99
                            style D3 fill:#ffff99
                            style E2 fill:#99ff99
                            style E3 fill:#ffff99
                    </div>
                </div>

                <div class="diagram-container">
                    <div class="diagram-title">Multi-Level Caching Strategy</div>
                    <div class="mermaid">
                        graph TD
                            A[Request] --> B[Request Hash]
                            B --> C{Cache Layers}
                            
                            C --> D1[Memory Cache<br/>L1<br/>15 min TTL]
                            C --> D2[Redis Cache<br/>L2<br/>24h TTL]
                            C --> D3[AI Response Cache<br/>L3<br/>Content-based]
                            
                            D1 -->|Hit| E1[Return < 10ms]
                            D1 -->|Miss| D2
                            
                            D2 -->|Hit| E2[Return < 50ms]
                            D2 -->|Miss| D3
                            
                            D3 -->|Hit| E3[Return < 100ms]
                            D3 -->|Miss| F[Call AI API]
                            
                            F --> G[Cache Response]
                            G --> D1
                            G --> D2
                            G --> D3
                            G --> H[Return Response]
                            
                            style E1 fill:#99ff99
                            style E2 fill:#99ff99
                            style E3 fill:#99ff99
                    </div>
                </div>

                <div class="diagram-container">
                    <div class="diagram-title">Circuit Breaker Pattern</div>
                    <div class="mermaid">
                        graph TD
                            A[AI Request] --> B{Circuit Breaker}
                            
                            B -->|Closed| C[Normal Operation]
                            B -->|Open| D[Fast Fail<br/>No API Call]
                            B -->|Half-Open| E[Test Request]
                            
                            C --> F[AI API Call]
                            F -->|Success| G[Update Metrics]
                            F -->|Failure| H[Count Failure]
                            
                            H --> I{Failure Threshold?}
                            I -->|No| C
                            I -->|Yes| J[Open Circuit]
                            
                            J --> D
                            D --> K[Fallback Model]
                            K --> L[Alternative API]
                            
                            E -->|Success| M[Close Circuit]
                            E -->|Failure| J
                            
                            style C fill:#99ff99
                            style D fill:#ff9999
                            style J fill:#ffff99
                    </div>
                </div>
            </div>
        </div>

        <div id="implementation" class="tab-content">
            <div class="card">
                <h2>‚ö° Implementation Plan</h2>
                
                <div class="success">
                    <h3>üìÖ Week 1: Foundation (Quick Wins)</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%;"></div>
                    </div>
                    <ul>
                        <li>‚úÖ Set up Redis cache infrastructure</li>
                        <li>‚úÖ Implement intelligent model router</li>
                        <li>‚úÖ Add connection pooling for HTTP clients</li>
                        <li>‚úÖ Create performance monitoring service</li>
                    </ul>
                </div>

                <div class="highlight">
                    <h3>üìÖ Week 2: Core Optimizations</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%;"></div>
                    </div>
                    <ul>
                        <li>üîÑ Implement multi-level caching</li>
                        <li>üîÑ Add circuit breaker pattern</li>
                        <li>üîÑ Parallelize service operations</li>
                        <li>üîÑ Optimize database queries</li>
                    </ul>
                </div>

                <div class="highlight">
                    <h3>üìÖ Week 3: Advanced Features</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 25%;"></div>
                    </div>
                    <ul>
                        <li>‚è≥ Add predictive caching</li>
                        <li>‚è≥ Implement background processing</li>
                        <li>‚è≥ Create monitoring dashboard</li>
                        <li>‚è≥ Performance testing and tuning</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2>üõ†Ô∏è Key Implementation Code</h2>
                
                <h3>Optimized Service with Parallel Operations</h3>
                <div class="code-block">
public async Task<RequirementsAnalysisResponse> AnalyzeRequirementsAsync(request) {
    // Check cache first (sub-second response)
    var cacheKey = $"req_analysis:{request.ProjectDescription.GetHashCode()}";
    if (_cache.TryGetValue(cacheKey, out RequirementsAnalysisResponse cachedResponse)) {
        return cachedResponse;
    }

    // Parallelize independent operations
    var instructionTask = _instructionService.GetInstructionAsync("RequirementsAnalyst");
    var validationTask = ValidateInputAsync(request);
    var aiCacheTask = _responseCache.GetCachedResponseAsync(request.ProjectDescription, "requirements");
    
    await Task.WhenAll(instructionTask, validationTask, aiCacheTask);

    // Use cached AI response or make new call with circuit breaker
    AIResponse aiResponse = aiCacheTask.Result ?? 
        await CallAIWithCircuitBreaker(aiClient, aiRequest);

    // Parallel database operations
    var saveTask = SaveAnalysisAsync(analysisId, request, aiResponse);
    var reviewTask = SubmitForReviewAsync(analysisId, aiResponse, instructionTask.Result);
    
    await Task.WhenAll(saveTask, reviewTask);
    
    var response = BuildResponse(analysisId, request, aiResponse, reviewTask.Result);
    _cache.Set(cacheKey, response, TimeSpan.FromMinutes(15));
    
    return response; // Total: 2-4 seconds
}
                </div>

                <h3>Circuit Breaker Implementation</h3>
                <div class="code-block">
public async Task<AIResponse> CallAIWithCircuitBreaker(IAIClient aiClient, AIRequest request) {
    using var cts = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken);
    cts.CancelAfter(TimeSpan.FromSeconds(8)); // 8-second hard timeout
    
    try {
        return await aiClient.CallAsync(request, cts.Token);
    } catch (OperationCanceledException) when (cts.Token.IsCancellationRequested) {
        _logger.LogWarning("AI call timed out after 8 seconds, attempting fallback");
        
        // Try fallback model (Claude) for faster response
        var fallbackClient = _aiClientFactory.GetClient("Claude");
        if (fallbackClient != null) {
            request.ModelName = "claude-3-haiku-20240307"; // Fast model
            return await fallbackClient.CallAsync(request, cancellationToken);
        }
        
        throw new TimeoutException("AI service timeout with no fallback available");
    }
}
                </div>
            </div>

            <div class="card">
                <h2>üìä Success Metrics & KPIs</h2>
                
                <div class="performance-grid">
                    <div class="metric-card">
                        <h3>‚â§ 5s</h3>
                        <p>Target Response Time</p>
                    </div>
                    <div class="metric-card">
                        <h3>> 99%</h3>
                        <p>Success Rate</p>
                    </div>
                    <div class="metric-card">
                        <h3>> 80%</h3>
                        <p>Cache Hit Rate</p>
                    </div>
                </div>

                <div class="warning">
                    <h3>‚ö†Ô∏è Monitoring Alerts</h3>
                    <ul>
                        <li><strong>Response Time > 6s:</strong> Auto-scale or model fallback</li>
                        <li><strong>Error Rate > 2%:</strong> Circuit breaker activation</li>
                        <li><strong>Cache Hit Rate < 70%:</strong> Cache optimization needed</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3498db',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#2980b9',
                lineColor: '#34495e',
                secondaryColor: '#ecf0f1',
                tertiaryColor: '#f8f9fa',
                background: '#ffffff',
                mainBkg: '#ffffff',
                secondBkg: '#ecf0f1',
                tertiaryBkg: '#f8f9fa'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });

        // Tab functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Scroll progress indicator
        window.addEventListener('scroll', function() {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollProgress = (scrollTop / scrollHeight) * 100;
            document.getElementById('scrollProgress').style.width = scrollProgress + '%';
        });

        // Add smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Add animation to metric cards
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.6s ease-out';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.metric-card').forEach(card => {
            observer.observe(card);
        });

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>