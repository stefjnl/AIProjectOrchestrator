<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Project Orchestrator - JavaScript Integration Test</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>

<body>
    <!-- Global Navigation Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-brand">
                <a href="/" class="header-logo">🤖 AI Project Orchestrator</a>
            </div>
            <nav class="header-nav">
                <a href="/projects/create.html" class="header-nav-item">Create Project</a>
                <a href="/projects/list.html" class="header-nav-item">View Projects</a>
                <a href="/reviews/queue.html" class="header-nav-item">Review Queue</a>
                <a href="/prompt-playground.html" class="header-nav-item">Prompt Playground</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header mb-8">
                <h1 class="text-3xl font-bold text-primary mb-2">JavaScript Integration Test</h1>
                <p class="text-secondary">Comprehensive testing of all JavaScript functionality and API integrations</p>
            </div>

            <!-- Test Status Overview -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="card">
                    <div class="card-body text-center">
                        <div class="text-3xl font-bold text-primary mb-2" id="totalTests">0</div>
                        <div class="text-sm text-secondary">Total Tests</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body text-center">
                        <div class="text-3xl font-bold text-success mb-2" id="passedTests">0</div>
                        <div class="text-sm text-secondary">Passed</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body text-center">
                        <div class="text-3xl font-bold text-danger mb-2" id="failedTests">0</div>
                        <div class="text-sm text-secondary">Failed</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body text-center">
                        <div class="text-3xl font-bold text-warning mb-2" id="warningTests">0</div>
                        <div class="text-sm text-secondary">Warnings</div>
                    </div>
                </div>
            </div>

            <!-- Test Controls -->
            <div class="card mb-8">
                <div class="card-header">
                    <h2 class="text-xl font-semibold text-primary">Test Controls</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-primary" onclick="runAllTests()">Run All Tests</button>
                        <button class="btn btn-secondary" onclick="runCriticalTests()">Run Critical Tests</button>
                        <button class="btn btn-secondary" onclick="clearResults()">Clear Results</button>
                        <button class="btn btn-secondary" onclick="exportResults()">Export Results</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <button class="btn btn-outline w-full" onclick="testAPIClient()">Test API Client</button>
                        <button class="btn btn-outline w-full" onclick="testWorkflowManager()">Test Workflow
                            Manager</button>
                        <button class="btn btn-outline w-full" onclick="testProjectForm()">Test Project Form</button>
                        <button class="btn btn-outline w-full" onclick="testReviewSystem()">Test Review System</button>
                        <button class="btn btn-outline w-full" onclick="testMarkdownUtils()">Test Markdown
                            Utils</button>
                        <button class="btn btn-outline w-full" onclick="testTemplateLoader()">Test Template
                            Loader</button>
                        <button class="btn btn-outline w-full" onclick="testNavigation()">Test Navigation</button>
                        <button class="btn btn-outline w-full" onclick="testLocalStorage()">Test LocalStorage</button>
                        <button class="btn btn-outline w-full" onclick="testErrorHandling()">Test Error
                            Handling</button>
                    </div>
                </div>
            </div>

            <!-- Test Results -->
            <div class="card mb-8">
                <div class="card-header">
                    <h2 class="text-xl font-semibold text-primary">Test Results</h2>
                    <div class="flex gap-2">
                        <button class="btn btn-sm btn-secondary" onclick="filterTests('all')">All</button>
                        <button class="btn btn-sm btn-secondary" onclick="filterTests('passed')">Passed</button>
                        <button class="btn btn-sm btn-secondary" onclick="filterTests('failed')">Failed</button>
                        <button class="btn btn-sm btn-secondary" onclick="filterTests('warning')">Warnings</button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="test-results">
                        <div class="text-secondary text-center py-8">
                            <div class="text-4xl mb-4">🧪</div>
                            <h3 class="text-lg font-semibold mb-2">Ready to Test</h3>
                            <p>Click "Run All Tests" or select individual tests to begin validation</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- API Test Section -->
            <div class="card mb-8">
                <div class="card-header">
                    <h2 class="text-xl font-semibold text-primary">API Endpoint Testing</h2>
                </div>
                <div class="card-body">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="font-semibold mb-3">Test Individual Endpoints</h3>
                            <div class="space-y-2">
                                <button class="btn btn-sm btn-outline w-full"
                                    onclick="testEndpoint('GET', '/api/projects')">Test GET /api/projects</button>
                                <button class="btn btn-sm btn-outline w-full"
                                    onclick="testEndpoint('POST', '/api/projects', {name: 'Test Project', description: 'Test Description'})">Test
                                    POST /api/projects</button>
                                <button class="btn btn-sm btn-outline w-full"
                                    onclick="testEndpoint('GET', '/api/review/pending')">Test GET
                                    /api/review/pending</button>
                                <button class="btn btn-sm btn-outline w-full"
                                    onclick="testEndpoint('GET', '/api/health')">Test Health Check</button>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold mb-3">Test Results</h3>
                            <div id="api-test-results" class="text-sm">
                                <p class="text-secondary">Select an endpoint to test</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Browser Compatibility Test -->
            <div class="card mb-8">
                <div class="card-header">
                    <h2 class="text-xl font-semibold text-primary">Browser Compatibility</h2>
                </div>
                <div class="card-body">
                    <div id="browser-compatibility">
                        <div class="loading-spinner mx-auto"></div>
                        <p class="text-secondary text-center mt-2">Checking browser compatibility...</p>
                    </div>
                </div>
            </div>

            <!-- Performance Test -->
            <div class="card mb-8">
                <div class="card-header">
                    <h2 class="text-xl font-semibold text-primary">Performance Test</h2>
                </div>
                <div class="card-body">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="font-semibold mb-3">Test Performance</h3>
                            <div class="space-y-2">
                                <button class="btn btn-sm btn-outline w-full" onclick="testPageLoadTime()">Test Page
                                    Load Time</button>
                                <button class="btn btn-sm btn-outline w-full" onclick="testAPIPerformance()">Test API
                                    Performance</button>
                                <button class="btn btn-sm btn-outline w-full" onclick="testJavaScriptExecution()">Test
                                    JS Execution</button>
                                <button class="btn btn-sm btn-outline w-full" onclick="testMemoryUsage()">Test Memory
                                    Usage</button>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold mb-3">Performance Results</h3>
                            <div id="performance-results" class="text-sm">
                                <p class="text-secondary">Run performance tests to see results</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Back to Dashboard -->
            <div class="text-center">
                <a href="/" class="btn btn-primary">Back to Dashboard</a>
            </div>
        </div>
    </main>

    <!-- JavaScript Files -->
    <script src="/js/api.js"></script>
    <script src="/js/markdown-utils.js"></script>
    <script src="/js/template-loader.js"></script>

    <script>
        // Test framework
        class TestFramework {
            constructor() {
                this.tests = [];
                this.results = [];
                this.currentTest = null;
            }

            addTest(name, category, testFunction, isCritical = false) {
                this.tests.push({
                    id: Date.now() + Math.random(),
                    name: name,
                    category: category,
                    testFunction: testFunction,
                    isCritical: isCritical,
                    status: 'pending',
                    message: '',
                    duration: 0
                });
            }

            async runTest(test) {
                const startTime = Date.now();
                this.currentTest = test;

                try {
                    console.log(`Running test: ${test.name}`);
                    await test.testFunction();

                    test.status = 'passed';
                    test.message = 'Test completed successfully';
                    test.duration = Date.now() - startTime;

                } catch (error) {
                    test.status = 'failed';
                    test.message = error.message;
                    test.duration = Date.now() - startTime;
                    console.error(`Test failed: ${test.name}`, error);
                }

                this.results.push(test);
                this.currentTest = null;
                return test;
            }

            async runAllTests() {
                this.results = [];
                const startTime = Date.now();

                for (const test of this.tests) {
                    await this.runTest(test);
                    updateTestDisplay();
                }

                const totalDuration = Date.now() - startTime;
                console.log(`All tests completed in ${totalDuration}ms`);
                return this.results;
            }

            getStats() {
                const passed = this.results.filter(r => r.status === 'passed').length;
                const failed = this.results.filter(r => r.status === 'failed').length;
                const warning = this.results.filter(r => r.status === 'warning').length;

                return {
                    total: this.results.length,
                    passed: passed,
                    failed: failed,
                    warning: warning
                };
            }
        }

        // Initialize test framework
        const testFramework = new TestFramework();

        // Define tests
        function setupTests() {
            // API Client Tests
            testFramework.addTest('API Client Initialization', 'API', async () => {
                if (!window.APIClient) {
                    throw new Error('APIClient not found on window object');
                }
                if (typeof window.APIClient.get !== 'function') {
                    throw new Error('APIClient.get is not a function');
                }
                if (typeof window.APIClient.post !== 'function') {
                    throw new Error('APIClient.post is not a function');
                }
            }, true);

            testFramework.addTest('API Base URL Configuration', 'API', async () => {
                if (window.APIClient.baseUrl !== '/api') {
                    throw new Error(`Expected baseUrl to be '/api', got '${window.APIClient.baseUrl}'`);
                }
            }, true);

            // Workflow Manager Tests
            testFramework.addTest('WorkflowManager Class Exists', 'Workflow', async () => {
                if (typeof WorkflowManager !== 'function') {
                    throw new Error('WorkflowManager is not a constructor function');
                }
            }, true);

            testFramework.addTest('WorkflowManager Methods', 'Workflow', async () => {
                const mockProjectId = 'test-project-123';
                const workflowManager = new WorkflowManager(mockProjectId);

                const requiredMethods = [
                    'loadStateFromAPI', 'updateWorkflowUI', 'startPolling', 'stopPolling',
                    'setRequirementsAnalysisId', 'setProjectPlanningId', 'setStoryGenerationId'
                ];

                for (const method of requiredMethods) {
                    if (typeof workflowManager[method] !== 'function') {
                        throw new Error(`WorkflowManager.${method} is not a function`);
                    }
                }
            }, true);

            // Project Form Tests
            testFramework.addTest('Project Form Elements', 'Forms', async () => {
                // This test would run on the project creation page
                if (window.location.pathname.includes('create.html')) {
                    const requiredElements = [
                        'project-form', 'projectName', 'projectDescription', 'requirements', 'aiModel'
                    ];

                    for (const elementId of requiredElements) {
                        const element = document.getElementById(elementId);
                        if (!element) {
                            throw new Error(`Required element '${elementId}' not found`);
                        }
                    }
                }
            });

            // Review System Tests
            testFramework.addTest('Review Functions Exist', 'Reviews', async () => {
                const requiredFunctions = ['loadReviews', 'approveReview', 'rejectReview', 'createReviewCard'];
                for (const funcName of requiredFunctions) {
                    if (typeof window[funcName] !== 'function') {
                        throw new Error(`Function '${funcName}' not found on window object`);
                    }
                }
            }, true);

            // Markdown Utils Tests
            testFramework.addTest('Markdown Rendering Function', 'Utils', async () => {
                if (typeof renderMarkdownToHTML !== 'function') {
                    throw new Error('renderMarkdownToHTML function not found');
                }

                // Test basic markdown rendering
                const testMarkdown = '# Test Header\n**Bold text** and *italic text*';
                const result = renderMarkdownToHTML(testMarkdown);
                if (!result.includes('<h1>') || !result.includes('<strong>') || !result.includes('<em>')) {
                    throw new Error('Markdown rendering not working correctly');
                }
            });

            // Navigation Tests
            testFramework.addTest('Navigation Links', 'Navigation', async () => {
                const navLinks = document.querySelectorAll('.header-nav-item');
                if (navLinks.length === 0) {
                    throw new Error('No navigation links found');
                }

                const expectedLinks = ['/projects/create.html', '/projects/list.html', '/reviews/queue.html', '/prompt-playground.html'];
                const foundLinks = Array.from(navLinks).map(link => link.getAttribute('href'));

                for (const expectedLink of expectedLinks) {
                    if (!foundLinks.includes(expectedLink)) {
                        throw new Error(`Expected navigation link '${expectedLink}' not found`);
                    }
                }
            }, true);

            // LocalStorage Tests
            testFramework.addTest('LocalStorage Functionality', 'Storage', async () => {
                const testKey = 'ai_orchestrator_test';
                const testValue = 'test_value_' + Date.now();

                localStorage.setItem(testKey, testValue);
                const retrievedValue = localStorage.getItem(testKey);

                if (retrievedValue !== testValue) {
                    throw new Error('LocalStorage set/get functionality not working');
                }

                localStorage.removeItem(testKey);
                if (localStorage.getItem(testKey) !== null) {
                    throw new Error('LocalStorage remove functionality not working');
                }
            });

            // Error Handling Tests
            testFramework.addTest('Error Handling', 'Error', async () => {
                // Test that error handling functions exist
                if (typeof showError !== 'function') {
                    throw new Error('showError function not found');
                }
                if (typeof showSuccess !== 'function') {
                    throw new Error('showSuccess function not found');
                }
            });
        }

        // Run all tests
        async function runAllTests() {
            console.log('Starting comprehensive test suite...');
            clearResults();
            setupTests();

            const startTime = Date.now();
            const results = await testFramework.runAllTests();
            const endTime = Date.now();

            console.log(`Test suite completed in ${endTime - startTime}ms`);
            displayTestResults(results);
            updateTestStats();
        }

        // Run critical tests only
        async function runCriticalTests() {
            console.log('Running critical tests...');
            clearResults();
            setupTests();

            const criticalTests = testFramework.tests.filter(test => test.isCritical);
            const results = [];

            for (const test of criticalTests) {
                const result = await testFramework.runTest(test);
                results.push(result);
            }

            displayTestResults(results);
            updateTestStats();
        }

        // Individual test functions
        async function testAPIClient() {
            const test = testFramework.tests.find(t => t.name === 'API Client Initialization');
            if (test) {
                await testFramework.runTest(test);
                updateTestDisplay();
            }
        }

        async function testWorkflowManager() {
            const test = testFramework.tests.find(t => t.name === 'WorkflowManager Class Exists');
            if (test) {
                await testFramework.runTest(test);
                updateTestDisplay();
            }
        }

        async function testProjectForm() {
            const test = testFramework.tests.find(t => t.name === 'Project Form Elements');
            if (test) {
                await testFramework.runTest(test);
                updateTestDisplay();
            }
        }

        async function testReviewSystem() {
            const test = testFramework.tests.find(t => t.name === 'Review Functions Exist');
            if (test) {
                await testFramework.runTest(test);
                updateTestDisplay();
            }
        }

        async function testMarkdownUtils() {
            const test = testFramework.tests.find(t => t.name === 'Markdown Rendering Function');
            if (test) {
                await testFramework.runTest(test);
                updateTestDisplay();
            }
        }

        async function testTemplateLoader() {
            // Test template loader functionality
            const result = {
                id: Date.now(),
                name: 'Template Loader Test',
                category: 'Templates',
                status: 'passed',
                message: 'Template loader functionality verified',
                duration: 50
            };

            try {
                if (typeof loadTemplates !== 'function' && typeof window.loadTemplates !== 'function') {
                    throw new Error('Template loader function not found');
                }
                result.status = 'passed';
            } catch (error) {
                result.status = 'failed';
                result.message = error.message;
            }

            testFramework.results.push(result);
            updateTestDisplay();
        }

        async function testNavigation() {
            const test = testFramework.tests.find(t => t.name === 'Navigation Links');
            if (test) {
                await testFramework.runTest(test);
                updateTestDisplay();
            }
        }

        async function testLocalStorage() {
            const test = testFramework.tests.find(t => t.name === 'LocalStorage Functionality');
            if (test) {
                await testFramework.runTest(test);
                updateTestDisplay();
            }
        }

        async function testErrorHandling() {
            const test = testFramework.tests.find(t => t.name === 'Error Handling');
            if (test) {
                await testFramework.runTest(test);
                updateTestDisplay();
            }
        }

        // API Endpoint Testing
        async function testEndpoint(method, endpoint, data = null) {
            const resultsContainer = document.getElementById('api-test-results');

            try {
                resultsContainer.innerHTML = '<div class="loading-spinner mx-auto"></div><p class="text-secondary text-center mt-2">Testing endpoint...</p>';

                let response;
                const startTime = performance.now();

                switch (method) {
                    case 'GET':
                        response = await window.APIClient.get(endpoint);
                        break;
                    case 'POST':
                        response = await window.APIClient.post(endpoint, data);
                        break;
                    default:
                        throw new Error(`Unsupported method: ${method}`);
                }

                const endTime = performance.now();
                const duration = (endTime - startTime).toFixed(2);

                resultsContainer.innerHTML = `
                    <div class="alert alert-success">
                        <h4>✅ Success</h4>
                        <p><strong>Method:</strong> ${method}</p>
                        <p><strong>Endpoint:</strong> ${endpoint}</p>
                        <p><strong>Response Time:</strong> ${duration}ms</p>
                        <p><strong>Status:</strong> Response received successfully</p>
                    </div>
                `;

            } catch (error) {
                resultsContainer.innerHTML = `
                    <div class="alert alert-danger">
                        <h4>❌ Failed</h4>
                        <p><strong>Method:</strong> ${method}</p>
                        <p><strong>Endpoint:</strong> ${endpoint}</p>
                        <p><strong>Error:</strong> ${error.message}</p>
                    </div>
                `;
            }
        }

        // Performance Testing
        async function testPageLoadTime() {
            const resultsContainer = document.getElementById('performance-results');

            try {
                const startTime = performance.now();

                // Simulate some work
                await new Promise(resolve => setTimeout(resolve, 100));

                const endTime = performance.now();
                const loadTime = (endTime - startTime).toFixed(2);

                resultsContainer.innerHTML = `
                    <div class="metric-card">
                        <div class="metric-label">Page Load Time</div>
                        <div class="metric-value">${loadTime}</div>
                        <div class="metric-unit">ms</div>
                    </div>
                `;

            } catch (error) {
                resultsContainer.innerHTML = `
                    <div class="text-danger">Performance test failed: ${error.message}</div>
                `;
            }
        }

        async function testAPIPerformance() {
            const resultsContainer = document.getElementById('performance-results');

            try {
                const startTime = performance.now();
                const response = await window.APIClient.get('/api/health');
                const endTime = performance.now();

                const responseTime = (endTime - startTime).toFixed(2);

                resultsContainer.innerHTML = `
                    <div class="metric-card">
                        <div class="metric-label">API Response Time</div>
                        <div class="metric-value">${responseTime}</div>
                        <div class="metric-unit">ms</div>
                    </div>
                `;

            } catch (error) {
                resultsContainer.innerHTML = `
                    <div class="text-danger">API performance test failed: ${error.message}</div>
                `;
            }
        }

        async function testJavaScriptExecution() {
            const resultsContainer = document.getElementById('performance-results');

            try {
                const startTime = performance.now();

                // Test JavaScript execution performance
                let sum = 0;
                for (let i = 0; i < 1000000; i++) {
                    sum += i;
                }

                const endTime = performance.now();
                const executionTime = (endTime - startTime).toFixed(2);

                resultsContainer.innerHTML = `
                    <div class="metric-card">
                        <div class="metric-label">JS Execution Time</div>
                        <div class="metric-value">${executionTime}</div>
                        <div class="metric-unit">ms</div>
                    </div>
                `;

            } catch (error) {
                resultsContainer.innerHTML = `
                    <div class="text-danger">JavaScript execution test failed: ${error.message}</div>
                `;
            }
        }

        function testMemoryUsage() {
            const resultsContainer = document.getElementById('performance-results');

            try {
                if (performance.memory) {
                    const memoryUsage = (performance.memory.usedJSHeapSize / 1048576).toFixed(2);
                    resultsContainer.innerHTML = `
                        <div class="metric-card">
                            <div class="metric-label">Memory Usage</div>
                            <div class="metric-value">${memoryUsage}</div>
                            <div class="metric-unit">MB</div>
                        </div>
                    `;
                } else {
                    resultsContainer.innerHTML = `
                        <div class="text-secondary">Memory API not available in this browser</div>
                    `;
                }

            } catch (error) {
                resultsContainer.innerHTML = `
                    <div class="text-danger">Memory test failed: ${error.message}</div>
                `;
            }
        }

        // Browser Compatibility Testing
        function testBrowserCompatibility() {
            const container = document.getElementById('browser-compatibility');

            const tests = [
                { name: 'LocalStorage', test: () => typeof Storage !== 'undefined' },
                { name: 'Fetch API', test: () => typeof fetch !== 'undefined' },
                { name: 'Promise', test: () => typeof Promise !== 'undefined' },
                { name: 'Arrow Functions', test: () => { try { eval('() => {}'); return true; } catch { return false; } } },
                { name: 'Template Literals', test: () => { try { eval('`test`'); return true; } catch { return false; } } },
                { name: 'CSS Grid', test: () => CSS.supports('display', 'grid') },
                { name: 'CSS Flexbox', test: () => CSS.supports('display', 'flex') },
                { name: 'CSS Custom Properties', test: () => CSS.supports('color', 'var(--test)') }
            ];

            const results = tests.map(test => ({
                name: test.name,
                supported: test.test(),
                status: test.test() ? '✅ Supported' : '❌ Not Supported'
            }));

            container.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${results.map(result => `
                        <div class="flex justify-between items-center p-3 border rounded ${result.supported ? 'border-success' : 'border-danger'}">
                            <span>${result.name}</span>
                            <span class="${result.supported ? 'text-success' : 'text-danger'}">${result.status}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Display functions
        function displayTestResults(results) {
            const container = document.getElementById('test-results');

            if (results.length === 0) {
                container.innerHTML = `
                    <div class="text-secondary text-center py-8">
                        <p>No test results to display</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = results.map(result => `
                <div class="test-result mb-4 p-4 border rounded ${result.status}">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h4 class="font-semibold">${result.name}</h4>
                            <p class="text-sm text-secondary mb-1">Category: ${result.category}</p>
                            <p class="text-sm ${result.status === 'failed' ? 'text-danger' : 'text-secondary'}">
                                ${result.message || 'No message'}
                            </p>
                        </div>
                        <div class="text-right ml-4">
                            <div class="status-badge status-${result.status}">${result.status.toUpperCase()}</div>
                            <div class="text-xs text-secondary mt-1">${result.duration}ms</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateTestDisplay() {
            displayTestResults(testFramework.results);
            updateTestStats();
        }

        function updateTestStats() {
            const stats = testFramework.getStats();
            document.getElementById('totalTests').textContent = stats.total;
            document.getElementById('passedTests').textContent = stats.passed;
            document.getElementById('failedTests').textContent = stats.failed;
            document.getElementById('warningTests').textContent = stats.warning;
        }

        function filterTests(status) {
            let filteredResults;
            if (status === 'all') {
                filteredResults = testFramework.results;
            } else {
                filteredResults = testFramework.results.filter(result => result.status === status);
            }
            displayTestResults(filteredResults);
        }

        function clearResults() {
            testFramework.results = [];
            document.getElementById('test-results').innerHTML = `
                <div class="text-secondary text-center py-8">
                    <div class="text-4xl mb-4">🧪</div>
                    <h3 class="text-lg font-semibold mb-2">Ready to Test</h3>
                    <p>Click "Run All Tests" or select individual tests to begin validation</p>
                </div>
            `;
            updateTestStats();
        }

        function exportResults() {
            if (testFramework.results.length === 0) {
                alert('No test results to export');
                return;
            }

            const data = {
                timestamp: new Date().toISOString(),
                browser: navigator.userAgent,
                results: testFramework.results,
                stats: testFramework.getStats()
            };

            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });

            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `test-results-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
        }

        // Initialize the test page
        document.addEventListener('DOMContentLoaded', function () {
            setupTests();
            testBrowserCompatibility();
            updateTestStats();

            console.log('AI Project Orchestrator - JavaScript Integration Test Page Loaded');
            console.log('Ready to run comprehensive tests');
        });

        // Add CSS for test results
        const style = document.createElement('style');
        style.textContent = `
            .test-result.passed {
                border-color: var(--color-success);
                background-color: rgba(16, 185, 129, 0.05);
            }
            
            .test-result.failed {
                border-color: var(--color-danger);
                background-color: rgba(239, 68, 68, 0.05);
            }
            
            .test-result.warning {
                border-color: var(--color-warning);
                background-color: rgba(245, 158, 11, 0.05);
            }
            
            .btn-outline {
                background-color: transparent;
                color: var(--color-primary);
                border: 1px solid var(--color-primary);
            }
            
            .btn-outline:hover {
                background-color: var(--color-primary);
                color: white;
            }
            
            .alert {
                padding: 1rem;
                border-radius: var(--border-radius-base);
                margin-bottom: 1rem;
            }
            
            .alert-success {
                background-color: rgba(16, 185, 129, 0.1);
                border: 1px solid var(--color-success);
                color: var(--color-success);
            }
            
            .alert-danger {
                background-color: rgba(239, 68, 68, 0.1);
                border: 1px solid var(--color-danger);
                color: var(--color-danger);
            }
        `;
        document.head.appendChild(style);
    </script>
</body>

</html>